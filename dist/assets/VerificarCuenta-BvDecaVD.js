import{_ as p,c as i,a,b as c,f as l,t as d,g as f,o as n}from"./index-BemHKz4Q.js";const h={data(){return{success:null,error:null,loading:!0,allowResend:!1,email:null}},async mounted(){var e,s;const r=this.$route.query.token;if(console.log("üîê Token capturado desde URL:",r),!r||typeof r!="string"){this.error="Token no v√°lido o faltante.",this.loading=!1;return}try{const o=await f.post("/auth/verificar",{token:r});this.success=o.data.message,this.loading=!1,setTimeout(()=>{this.$router.push("/login")},3e3)}catch(o){console.error("‚ùå Error al verificar:",o),this.error=((s=(e=o.response)==null?void 0:e.data)==null?void 0:s.message)||"Ocurri√≥ un error al verificar la cuenta.",this.loading=!1,(this.error.toLowerCase().includes("expirado")||this.error.toLowerCase().includes("inv√°lido"))&&(this.allowResend=!0)}},methods:{async reenviarCorreo(){var r,e;try{const s=prompt("Ingresa tu correo electr√≥nico para reenviar el enlace de verificaci√≥n:");if(!s)return;const o=await f.post("/auth/reenviar-verificacion",{correo_electronico:s});this.success=o.data.message,this.error=null,this.allowResend=!1}catch(s){this.error=((e=(r=s.response)==null?void 0:r.data)==null?void 0:e.message)||"No se pudo reenviar el correo.",this.success=null}}}},g={class:"verificar-container"},m={class:"verificar-box"},_={key:0},k={key:1,class:"success"},y={key:2,class:"error"},C={key:0};function w(r,e,s,o,t,u){return n(),i("div",g,[a("div",m,[e[3]||(e[3]=a("h2",null,"Verificaci√≥n de Cuenta",-1)),t.loading?(n(),i("div",_,"Verificando tu cuenta, por favor espera...")):c("",!0),t.success?(n(),i("div",k,[l(d(t.success),1),e[1]||(e[1]=a("br",null,null,-1)),e[2]||(e[2]=l(" Ser√°s redirigido en breve... "))])):c("",!0),t.error?(n(),i("div",y,[l(d(t.error)+" ",1),t.allowResend?(n(),i("div",C,[a("button",{onClick:e[0]||(e[0]=(...v)=>u.reenviarCorreo&&u.reenviarCorreo(...v)),class:"resend-btn"},"Reenviar verificaci√≥n")])):c("",!0)])):c("",!0)])])}const x=p(h,[["render",w],["__scopeId","data-v-f1d7cb82"]]);export{x as default};
